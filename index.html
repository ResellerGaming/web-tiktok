<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Mini TikTok</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background:#000;
      color:#fff;
      overflow-y:scroll;
      scroll-snap-type:y mandatory;
      height:100vh;
    }
    section{
      width:100vw;
      height:100vh;
      scroll-snap-align:start;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
    }
    video{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    /* Overlay kanan (ikon) */
    .overlay{
      position:absolute;
      right:12px;
      bottom:90px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
    }
    .overlay button{
      background:none;
      border:none;
      color:#fff;
      font-size:28px;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
    }
    .overlay button span{font-size:12px}
    /* Like animasi */
    .liked{color:#fe2c55!important;animation:pop .3s ease}
    @keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.4)}100%{transform:scale(1)}}
    /* Progress bar */
    .progress{
      position:absolute;
      bottom:0;
      left:0;
      height:3px;
      background:rgba(255,255,255,.3);
      width:100%;
    }
    .progress-bar{
      height:100%;
      background:#fff;
      width:0;
      transition:none;
    }
  </style>
</head>
<body>

  <!-- Ganti src= dengan video kamu / URL eksternal -->
  <section>
    <video src="/vidio/video1.mp4" muted loop playsinline></video>
    <div class="overlay">
      <button onclick="toggleLike(this)">
        <div class="heart">‚ù§</div>
        <span>0</span>
      </button>
      <button>üí¨<span>0</span></button>
      <button>‚ÜóÔ∏è<span>Share</span></button>
    </div>
    <div class="progress"><div class="progress-bar"></div></div>
  </section>

  <section>
    <video src="/vidio/video2.mp4" muted loop playsinline></video>
    <div class="overlay">
      <button onclick="toggleLike(this)">
        <div class="heart">‚ù§</div>
        <span>0</span>
      </button>
      <button>üí¨<span>0</span></button>
      <button>‚ÜóÔ∏è<span>Share</span></button>
    </div>
    <div class="progress"><div class="progress-bar"></div></div>
  </section>

  <section>
    <video src="video3.mp4" muted loop playsinline></video>
    <div class="overlay">
      <button onclick="toggleLike(this)">
        <div class="heart">‚ù§</div>
        <span>0</span>
      </button>
      <button>üí¨<span>0</span></button>
      <button>‚ÜóÔ∏è<span>Share</span></button>
    </div>
    <div class="progress"><div class="progress-bar"></div></div>
  </section>

<script>
  // Auto play/pause saat scroll
  const videos = document.querySelectorAll('video');
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(en=>{
      if(en.isIntersecting){
        en.target.play();
        runProgress(en.target);
      }else{
        en.target.pause();
        resetProgress(en.target);
      }
    });
  },{threshold:.7});
  videos.forEach(v=>observer.observe(v));

  // Progress bar (putar sampai selesai lalu ulang)
  function runProgress(video){
    const bar = video.closest('section').querySelector('.progress-bar');
    let width = 0;
    const dur = video.duration * 1000; // ms
    const start = Date.now();
    const anim = ()=>{
      const pct = (Date.now()-start)/dur *100;
      bar.style.width = Math.min(pct,100)+'%';
      if(pct<100) requestAnimationFrame(anim);
    };
    bar.barAnim = requestAnimationFrame(anim);
  }
  function resetProgress(video){
    const bar = video.closest('section').querySelector('.progress-bar');
    cancelAnimationFrame(bar.barAnim||0);
    bar.style.width='0';
  }

  // Like toggle
  function toggleLike(btn){
    btn.classList.toggle('liked');
    const span = btn.querySelector('span');
    let n = parseInt(span.textContent);
    span.textContent = btn.classList.contains('liked') ? n+1 : n-1;
  }
</script>
</body>
  </html>
